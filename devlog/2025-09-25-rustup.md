# 2025-09-25 — Rust/Bevy setup in toolbox

Context
- Host: Fedora Silverblue (inside `toolbox`)
- Goal: Stand up a Bevy-backed voxel mini-game scaffold
- Repo: `platz`

Actions taken
- Scaffolded a Rust binary crate (`Cargo.toml`, `src/main.rs`).
- Added core modules:
  - `src/voxel.rs`: Minimal `Voxel` type with `AIR`.
  - `src/world/`: `Chunk` (32³) with get/set and bounds.
  - `src/meshing.rs`: Naive face-culling mesher → `SurfaceMesh`.
- Integrated Bevy 0.14 and rendered a world:
  - 9×9×9 chunk grid; simple ground layer at global Y=0.
  - Converted `SurfaceMesh` → Bevy `Mesh`, spawned `PbrBundle` per chunk.
  - Camera + directional light.
- Audio issues (ALSA) in toolbox:
  - Disabled Bevy `AudioPlugin` to avoid ALSA init.

Install notes (toolbox)
- Build tools group check/install:
  - List installed groups: `dnf group list --hidden installed | grep -i 'development tools'`
  - Install group: `sudo dnf install -y @development-tools`
  - Fallback minimal: `sudo dnf install -y gcc gcc-c++ make pkg-config clang lld`
- Rust & Cargo via rustup (preferred):
  - `sudo dnf install -y rustup && rustup-init -y`
  - Load PATH: `source "$HOME/.cargo/env"`
  - Verify: `rustc -V && cargo -V`
  - Optional: `rustup component add rustfmt clippy`
- Bevy runtime libs (if missing):
  - `sudo dnf install -y vulkan-loader mesa-vulkan-drivers vulkan-tools libX11 libXcursor libXi libXrandr libxkbcommon wayland alsa-lib pipewire-libs`

Run
- From repo root: `cargo run`
- Troubleshooting:
  - Vulkan check: `vulkaninfo | head` (install `vulkan-tools` if needed)
  - Force X11 if Wayland issues: `WINIT_UNIX_BACKEND=x11 cargo run`

Code refs
- Disable audio: in `src/lib.rs`
  - `App::new().add_plugins(DefaultPlugins.build().disable::<bevy::audio::AudioPlugin>())`

Next steps
- Add fly camera (WASD + mouse).
- Heightmap/noise worldgen so more chunks render.
- Greedy meshing for fewer faces.
- Frustum culling and chunk streaming.

